#! /usr/bin/env bash

DMENU="rofi -show-icons -dmenu -i -p"

options=(
    'ðŸšª Quit'
    'ðŸ”„ Reboot'
    'ðŸ”Œ Shutdown'
)

main() {
    choice=$(printf '%s\n' "${options[@]}" | ${DMENU} 'Menu:' "${@}")

    case $choice in
        'ðŸ”„ Reboot')
            if [[ "$(echo -e "No\nYes" | ${DMENU} "${choice}?" "${@}")" == "Yes" ]]; then
                systemctl reboot
            else
                echo "Reboot cancelled." && exit 1
            fi
        ;;

        'ðŸ”Œ Shutdown')
            if [[ "$(echo -e "No\nYes" | ${DMENU} "${choice}?" "${@}")" == "Yes" ]]; then
                systemctl poweroff
            else
                echo "Shutdown cancelled." && exit 1
            fi
        ;;

        *)
            echo "User choose to close" && exit 1
        ;;
    esac
}

main
