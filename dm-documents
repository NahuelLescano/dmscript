#!/usr/bin/env bash

DMENU="rofi -dmenu -p"

PDF_VIEWER="zathura"

main() {
   files="$(find "$HOME" -maxdepth 4 -iname "*.pdf")"
    choice=$(printf '%s\n' "${files[@]}" \
        | cut -d '/' -f4- \
        | sed -e 's/Descargas/Dsg/g' \
            -e 's/Books/Bks/g' \
            -e 's/.pdf//g' \
        | sort -g \
        | ${DMENU} "File: ") || exit 1
    if [ "$choice" ]; then
        file=$(
            printf '%s' "$choice" \
                | sed -e 's/Dsg/Descargas/g' \
                    -e 's/Bks/Books/g' \
        )
        "${PDF_VIEWER}" "$HOME/${file}.pdf"
    else
        echo "Program Terminated." && exit 0
    fi
}

main
